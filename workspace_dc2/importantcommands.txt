kubectl vsphere login --server 10.3.141.1 --insecure-skip-tls-verify --tanzu-kubernetes-cluster-name et02-tkg-bigdata-prod-workload-cluster --tanzu-kubernetes-cluster-namespace et02-tkg-bigdata-prod --vsphere-username=Safaricomet\Mohd.Almas
wFB&9N2pku!G

https://mohdalmas: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@github.com/workspace_dc.git

Username/Password for Ingress UIs:

hadoop Vk8sBRGZ4N9Remxb
hive Xj9jzb4xtWzF3Pe6
spark nNgmCcY4zmD3LJxE

svc-bigdata-admin@safaricomet.net 
lyOdmSBwCsZnD4dLnOAE

Safaricomet\Mohd.Almas

Proxy: http://proxy1.safaricomet.net:3128 

export http_proxy=http://proxy1.safaricomet.net:3128 
export https_proxy=http://proxy1.safaricomet.net:3128 

Harbor: https://et02-harbor.safaricomet.net/bigdata

kubectl create secret docker-registry regcred --docker-server=et02-harbor.safaricomet.net --docker-username=svc-bigdata-admin@safaricomet.net --docker-password="lyOdmSBwCsZnD4dLnOAE"

kubectl create secret docker-registry regcredalmas --docker-server=et02-harbor.safaricomet.net --docker-username=Mohd.Almas@safaricomet.net --docker-password=wFB&9N2pku!G

docker login et02-harbor.safaricomet.net --username Mohd.Almas@safaricomet.net --password 'wFB&9N2pku!G'
docker login et01-harbor.safaricomet.net --username Mohd.Almas@safaricomet.net --password 'wFB&9N2pku!G'
docker logout

Wait for Consumer: topology-aware-standard
ReadWriteOnce: 
ReadWriteMany: nfs-bigdata

docker login et02-harbor.safaricomet.net

Sunil.Kumar
Y4T&zcX9d(ns


kubectl config get-contexts                          # display list of contexts 
kubectl config current-context 

kubectl config set-context --current --namespace=et02-tkg-bigdata-prod
kubectl config set-context --current --namespace=tanzu-system-monitoring
kubectl config set-context --current --namespace=bigdata-monitoring
kubectl config set-context --current --namespace=ingress-nginx
kubectl config set-context --current --namespace=kafka
kubectl config set-context --current --namespace=bigdata-unison
kubectl config set-context --current --namespace=it-w01-bigdata


et02-tkg-bigdata-prod-workload-cluster-workers-bbkq9-99bbb8wkln N
et02-tkg-bigdata-prod-workload-cluster-workers-bbkq9-99bbbgqhcr N
et02-tkg-bigdata-prod-workload-cluster-workers-bbkq9-99bbbhf9tz N
et02-tkg-bigdata-prod-workload-cluster-workers-bbkq9-99bbbj7vmh H
et02-tkg-bigdata-prod-workload-cluster-workers-bbkq9-99bbbl7t84 H
et02-tkg-bigdata-prod-workload-cluster-workers-bbkq9-99bbbsv7cz -
et02-tkg-bigdata-prod-workload-cluster-workers-bbkq9-99bbbt2kw7 H
et02-tkg-bigdata-prod-workload-cluster-workers-bbkq9-99bbbwqsf2 -

et02-tkg-bigdata-prod-workload-cluster-workers-bbkq9-99bbb5jc86   Ready                      <none>                 9h      v1.20.12+vmware.1
et02-tkg-bigdata-prod-workload-cluster-workers-bbkq9-99bbb6rrtz   Ready                      <none>                 9h      v1.20.12+vmware.1
et02-tkg-bigdata-prod-workload-cluster-workers-bbkq9-99bbb7qgjp   Ready                      <none>                 9h      v1.20.12+vmware.1
et02-tkg-bigdata-prod-workload-cluster-workers-bbkq9-99bbb8wkln   Ready                      <none>                 9h      v1.20.12+vmware.1
et02-tkg-bigdata-prod-workload-cluster-workers-bbkq9-99bbbl7t84   Ready                      <none>                 9h      v1.20.12+vmware.1
et02-tkg-bigdata-prod-workload-cluster-workers-bbkq9-99bbbq6n9d   Ready                      <none>                 9h      v1.20.12+vmware.1
et02-tkg-bigdata-prod-workload-cluster-workers-bbkq9-99bbbthp8h   Ready                      <none>                 9h      v1.20.12+vmware.1
et02-tkg-bigdata-prod-workload-cluster-workers-bbkq9-99bbbx9m4w   Ready                      <none>                 9h      v1.20.12+vmware.1

kubectl taint nodes et02-tkg-bigdata-prod-workload-cluster-workers-bbkq9-99bbb8wkln  dedicated=Kafka-Nifi:NoSchedule
kubectl label nodes et02-tkg-bigdata-prod-workload-cluster-workers-bbkq9-99bbb8wkln  dedicated=Kafka-Nifi
kubectl taint nodes et02-tkg-bigdata-prod-workload-cluster-workers-bbkq9-99bbbgqhcr  dedicated=Kafka-Nifi:NoSchedule
kubectl label nodes et02-tkg-bigdata-prod-workload-cluster-workers-bbkq9-99bbbgqhcr  dedicated=Kafka-Nifi
kubectl taint nodes et02-tkg-bigdata-prod-workload-cluster-workers-bbkq9-99bbbhf9tz  dedicated=Kafka-Nifi:NoSchedule
kubectl label nodes et02-tkg-bigdata-prod-workload-cluster-workers-bbkq9-99bbbhf9tz  dedicated=Kafka-Nifi

kubectl taint nodes et02-tkg-bigdata-prod-workload-cluster-workers-bbkq9-99bbbl7t84  dedicated=Hadoop:NoSchedule
kubectl label nodes et02-tkg-bigdata-prod-workload-cluster-workers-bbkq9-99bbbl7t84  dedicated=Hadoop
kubectl taint nodes et02-tkg-bigdata-prod-workload-cluster-workers-bbkq9-99bbbj7vmh dedicated=Hadoop:NoSchedule
kubectl label nodes et02-tkg-bigdata-prod-workload-cluster-workers-bbkq9-99bbbj7vmh  dedicated=Hadoop
kubectl taint nodes et02-tkg-bigdata-prod-workload-cluster-workers-bbkq9-99bbbt2kw7 dedicated=Hadoop:NoSchedule
kubectl label nodes et02-tkg-bigdata-prod-workload-cluster-workers-bbkq9-99bbbt2kw7  dedicated=Hadoop

#kubectl taint nodes et02-tkg-bigdata-prod-workload-cluster-workers-bbkq9-99bbb8wkln  dedicated-
#kubectl label nodes et02-tkg-bigdata-prod-workload-cluster-workers-bbkq9-99bbb8wkln  dedicated-
#kubectl taint nodes et02-tkg-bigdata-prod-workload-cluster-workers-bbkq9-99bbbgqhcr  dedicated-
#kubectl label nodes et02-tkg-bigdata-prod-workload-cluster-workers-bbkq9-99bbbgqhcr  dedicated-
#kubectl taint nodes et02-tkg-bigdata-prod-workload-cluster-workers-bbkq9-99bbbhf9tz  dedicated-
#kubectl label nodes et02-tkg-bigdata-prod-workload-cluster-workers-bbkq9-99bbbhf9tz  dedicated-

kubectl taint nodes et02-tkg-bigdata-prod-workload-cluster-workers-bbkq9-99bbbl7t84  dedicated-
kubectl label nodes et02-tkg-bigdata-prod-workload-cluster-workers-bbkq9-99bbbl7t84  dedicated-
kubectl taint nodes et02-tkg-bigdata-prod-workload-cluster-workers-bbkq9-99bbbj7vmh dedicated-
kubectl label nodes et02-tkg-bigdata-prod-workload-cluster-workers-bbkq9-99bbbj7vmh  dedicated-
kubectl taint nodes et02-tkg-bigdata-prod-workload-cluster-workers-bbkq9-99bbbt2kw7 dedicated-
kubectl label nodes et02-tkg-bigdata-prod-workload-cluster-workers-bbkq9-99bbbt2kw7  dedicated-


#kubectl taint nodes et01-tkg-bigdata-prod-workload-cluster-workers-qgbj4-948b546qj6  dedicated-
#kubectl taint nodes et01-tkg-bigdata-prod-workload-cluster-workers-qgbj4-948b5cb69m  dedicated-
#kubectl taint nodes et01-tkg-bigdata-prod-workload-cluster-workers-qgbj4-948b5cx4ws  dedicated-
kubectl taint nodes et01-tkg-bigdata-prod-workload-cluster-workers-qgbj4-948b5jsm5c  dedicated-
kubectl taint nodes et01-tkg-bigdata-prod-workload-cluster-workers-qgbj4-948b5lwcml  dedicated-
kubectl taint nodes et01-tkg-bigdata-prod-workload-cluster-workers-qgbj4-948b5psmcq  dedicated-
#kubectl label nodes et01-tkg-bigdata-prod-workload-cluster-workers-qgbj4-948b546qj6  dedicated-
#kubectl label nodes et01-tkg-bigdata-prod-workload-cluster-workers-qgbj4-948b5cb69m  dedicated-
#kubectl label nodes et01-tkg-bigdata-prod-workload-cluster-workers-qgbj4-948b5cx4ws  dedicated-
kubectl label nodes et01-tkg-bigdata-prod-workload-cluster-workers-qgbj4-948b5jsm5c  dedicated-
kubectl label nodes et01-tkg-bigdata-prod-workload-cluster-workers-qgbj4-948b5lwcml  dedicated-
kubectl label nodes et01-tkg-bigdata-prod-workload-cluster-workers-qgbj4-948b5psmcq  dedicated-



sed -i '/# %wheel/c\%wheel        ALL=(ALL)       NOPASSWD: ALL' /etc/sudoers
usermod --append -G wheel mohd.almas

      {{- if .Values.tolerations }}
      tolerations: {{- include "common.tplvalues.render" (dict "value" .Values.tolerations "context" $) | nindent 8 }}
      {{- end }}
	  {{- if .Values.affinity }}
      affinity: {{- include "common.tplvalues.render" (dict "value" .Values.affinity "context" $) | nindent 8 }}
      {{- else }}
        ()
        tolerations:
        - key: "dedicated"
          operator: "Equal"
          value: "Kafka-Nifi"
          effect: "NoSchedule"
        affinity:
		()
          nodeAffinity:
            requiredDuringSchedulingIgnoredDuringExecution:
              nodeSelectorTerms:
              - matchExpressions:
                - key: dedicated
                  operator: In
                  values:
                  - Kafka-Nifi
				  
				  

      imagePullSecrets:
      - name: regcred
				
				
docker pull mohdalmasansari/hadoop-redhat:hadoop-3.1.1-hbase-2.0.2-phoenix-5.0.0
docker pull mohdalmasansari/hive-spark:hive-3.1.0-spark-2.3.0-scala-2.11.6
docker pull docker.io/bitnami/postgresql:11.10.0-debian-10-r83
docker pull quay.io/strimzi/kafka:0.27.1-kafka-3.0.0
docker pull kapkiai/nifi@sha256:7be438fcb8a74249d3799c8b7f9020d2ccf484625689f45d802a3249ac305667
docker pull busybox:latest
<--done upto --->
docker pull mohdalmasansari/spark:spark-3.2.0-scala-2.12.0
docker pull zookeeper:3.5.5
docker pull k8s.gcr.io/ingress-nginx/controller:v1.1.2@sha256:28b11ce69e57843de44e3db6413e98d09de0f6688e33d4bd384002a44f78405c
docker pull et02-harbor.safaricomet.net/bigdata/nginx-kube-webhook-certgen:v1.1.1
docker pull quay.io/strimzi/operator:0.27.1
docker pull kapkiai/nifi-toolkit:1.15.1
docker pull mohdalmasansari/jupyterhub:v2.1.0-beta-ubi8.5
docker pull docker.io/provectuslabs/kafka-ui:8d10eb69e8b91cf6b807cdba3f68f038efa931fc 

docker tag mohdalmasansari/hadoop-redhat:hadoop-3.1.1-hbase-2.0.2-phoenix-5.0.0                 et02-harbor.safaricomet.net/bigdata/hadoop-redhat:hadoop-3.1.1-hbase-2.0.2-phoenix-5.0.0
docker tag mohdalmasansari/hive-spark:hive-3.1.0-spark-2.3.0-scala-2.11.6                       et02-harbor.safaricomet.net/bigdata/hive-spark:hive-3.1.0-spark-2.3.0-scala-2.11.6
docker tag bitnami/postgresql:11.10.0-debian-10-r83                                             et02-harbor.safaricomet.net/bigdata/postgresql:11.10.0-debian-10-r83
docker tag quay.io/strimzi/kafka:0.27.1-kafka-3.0.0                                             et02-harbor.safaricomet.net/bigdata/kafka:0.27.1-kafka-3.0.0
docker tag kapkiai/nifi@sha256:7be438fcb8a74249d3799c8b7f9020d2ccf484625689f45d802a3249ac305667 et02-harbor.safaricomet.net/bigdata/nifi:1.15.10
docker tag busybox:latest                                                                       et02-harbor.safaricomet.net/bigdata/busybox:latest
docker tag mohdalmasansari/spark:spark-3.2.0-scala-2.12.0                                       et02-harbor.safaricomet.net/bigdata/spark:spark-3.2.0-scala-2.12.0
docker tag zookeeper:3.5.5                                                                      czookeeper:3.5.5
docker tag k8s.gcr.io/ingress-nginx/controller:v1.1.2@sha256:28b11ce69e57843de44e3db6413e98d09de0f6688e33d4bd384002a44f78405c et02-harbor.safaricomet.net/bigdata/nginx-controller:1.1.2
docker tag et02-harbor.safaricomet.net/bigdata/nginx-kube-webhook-certgen:v1.1.1 et02-harbor.safaricomet.net/bigdata/nginx-kube-webhook-certgen:v1.1.1
docker tag quay.io/strimzi/operator:0.27.1 et02-harbor.safaricomet.net/bigdata/strimzi-operator:0.27.1
docker tag kapkiai/nifi-toolkit:1.15.1 et02-harbor.safaricomet.net/bigdata/nifi-toolkit:1.15.1
docker tag mohdalmasansari/jupyterhub:v2.1.0-beta-ubi8.5 et02-harbor.safaricomet.net/bigdata/jupyterhub:v2.1.0-beta-ubi8.5
docker tag provectuslabs/kafka-ui:8d10eb69e8b91cf6b807cdba3f68f038efa931fc  et02-harbor.safaricomet.net/bigdata/kafka-ui:8d10eb69e8b91cf6b807cdba3f68f038efa931fc  

docker push et02-harbor.safaricomet.net/bigdata/hadoop-redhat:hadoop-3.1.1-hbase-2.0.2-phoenix-5.0.0
docker push et02-harbor.safaricomet.net/bigdata/hive-spark:hive-3.1.0-spark-2.3.0-scala-2.11.6
docker push et02-harbor.safaricomet.net/bigdata/postgresql:11.10.0-debian-10-r83
docker push et02-harbor.safaricomet.net/bigdata/kafka:0.27.1-kafka-3.0.0
docker push et02-harbor.safaricomet.net/bigdata/nifi:1.15.10
docker push et02-harbor.safaricomet.net/bigdata/busybox:latest
docker push et02-harbor.safaricomet.net/bigdata/spark:spark-3.2.0-scala-2.12.0
docker push et02-harbor.safaricomet.net/bigdata/zookeeper:3.5.5
docker push et02-harbor.safaricomet.net/bigdata/nginx-controller:1.1.2
docker push et02-harbor.safaricomet.net/bigdata/nginx-kube-webhook-certgen:v1.1.1
docker push et02-harbor.safaricomet.net/bigdata/strimzi-operator:0.27.1
docker push et02-harbor.safaricomet.net/bigdata/nifi-toolkit:1.15.1
docker push et02-harbor.safaricomet.net/bigdata/jupyterhub:v2.1.0-beta-ubi8.5
docker push et02-harbor.safaricomet.net/bigdata/kafka-ui:8d10eb69e8b91cf6b807cdba3f68f038efa931fc 


sed -i 's/cluster.id=Ml9qPxcCQ92HNMOt6qDk9g/cluster.id=9V4QUE4tQ02AmOYrBsU2hA/' /var/lib/kafka/data/kafka-log1/meta.properties
sed -i 's/cluster.id=Ml9qPxcCQ92HNMOt6qDk9g/cluster.id=9V4QUE4tQ02AmOYrBsU2hA/' /var/lib/kafka/data/kafka-log2/meta.properties


docker pull kenchir/postgres:11.10.0-v2
docker tag kenchir/postgres:11.10.0-v2 et01-harbor.safaricomet.net/bigdata/postgresql:11.10.0-debian-10-r83
docker push et01-harbor.safaricomet.net/bigdata/postgresql:11.10.0-debian-10-r83


- install Java - 8 jdk-8

- Set JAVA_HOME

- copy spark.jar and postgres.jar to /tmp/ persistent value


