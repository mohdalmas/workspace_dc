kubectl vsphere login --insecure-skip-tls-verify --server 10.3.40.1 --tanzu-kubernetes-cluster-name et01-tkg-bigdata-prod-workload-cluster --tanzu-kubernetes-cluster-namespace et01-tkg-bigdata-prod --vsphere-username=Safaricomet\Mohd.Almas
wFB&9N2pku!G

Safaricomet\Mohd.Almas
Safaricomet\svc-bigdata-admin
lyOdmSBwCsZnD4dLnOAE

export http_proxy=http://proxy2.safaricomet.net:3128
export https_proxy=http://proxy2.safaricomet.net:3128
export HTTP_PROXY=http://proxy2.safaricomet.net:3128
export HTTPS_PROXY=http://proxy2.safaricomet.net:3128

Sunil.Kumar
Y4T&zcX9d(ns

kubectl config get-contexts                          # display list of contexts 
kubectl config current-context 

kubectl config set-context --current --namespace=et01-tkg-bigdata-prod
kubectl config set-context --current --namespace=ingress-nginx
kubectl config set-context --current --namespace=kafka

kubectl create secret docker-registry regcred --docker-server=et01-harbor.safaricomet.net --docker-username=svc-bigdata-admin@safaricomet.net --docker-password="lyOdmSBwCsZnD4dLnOAE"



et01-tkg-bigdata-prod-workload-cluster-workers-qgbj4-6697c94n6d   Ready    <none>                 6d17h   v1.20.12+vmware.1
et01-tkg-bigdata-prod-workload-cluster-workers-qgbj4-6697cbpwh6   Ready    <none>                 6d17h   v1.20.12+vmware.1
et01-tkg-bigdata-prod-workload-cluster-workers-qgbj4-6697cdmcx9   Ready    <none>                 6d17h   v1.20.12+vmware.1
et01-tkg-bigdata-prod-workload-cluster-workers-qgbj4-6697cds429   Ready    <none>                 6d17h   v1.20.12+vmware.1
et01-tkg-bigdata-prod-workload-cluster-workers-qgbj4-6697clvr2g   Ready    <none>                 6d17h   v1.20.12+vmware.1
et01-tkg-bigdata-prod-workload-cluster-workers-qgbj4-6697clvrx5   Ready    <none>                 6d17h   v1.20.12+vmware.1
et01-tkg-bigdata-prod-workload-cluster-workers-qgbj4-6697cn5lnd   Ready    <none>                 6d17h   v1.20.12+vmware.1
et01-tkg-bigdata-prod-workload-cluster-workers-qgbj4-6697cxqgqj   Ready    <none>                 6d17h   v1.20.12+vmware.1


kubectl taint nodes et01-tkg-bigdata-prod-workload-cluster-workers-qgbj4-6697c94n6d  dedicated=Kafka-Nifi:NoSchedule
kubectl label nodes et01-tkg-bigdata-prod-workload-cluster-workers-qgbj4-6697c94n6d  dedicated=Kafka-Nifi
kubectl taint nodes et01-tkg-bigdata-prod-workload-cluster-workers-qgbj4-6697cbpwh6  dedicated=Kafka-Nifi:NoSchedule
kubectl label nodes et01-tkg-bigdata-prod-workload-cluster-workers-qgbj4-6697cbpwh6  dedicated=Kafka-Nifi
kubectl taint nodes et01-tkg-bigdata-prod-workload-cluster-workers-qgbj4-6697cdmcx9  dedicated=Kafka-Nifi:NoSchedule
kubectl label nodes et01-tkg-bigdata-prod-workload-cluster-workers-qgbj4-6697cdmcx9  dedicated=Kafka-Nifi


kubectl taint nodes et01-tkg-bigdata-prod-workload-cluster-workers-qgbj4-6697cds429  dedicated=Hadoop:NoSchedule
kubectl label nodes et01-tkg-bigdata-prod-workload-cluster-workers-qgbj4-6697cds429  dedicated=Hadoop
kubectl taint nodes et01-tkg-bigdata-prod-workload-cluster-workers-qgbj4-6697clvr2g  dedicated=Hadoop:NoSchedule
kubectl label nodes et01-tkg-bigdata-prod-workload-cluster-workers-qgbj4-6697clvr2g  dedicated=Hadoop
kubectl taint nodes et01-tkg-bigdata-prod-workload-cluster-workers-qgbj4-6697clvrx5  dedicated=Hadoop:NoSchedule
kubectl label nodes et01-tkg-bigdata-prod-workload-cluster-workers-qgbj4-6697clvrx5  dedicated=Hadoop


sed -i '/# %wheel/c\%wheel        ALL=(ALL)       NOPASSWD: ALL' /etc/sudoers
usermod --append -G wheel mohd.almas

      {{- if .Values.tolerations }}
      tolerations: {{- include "common.tplvalues.render" (dict "value" .Values.tolerations "context" $) | nindent 8 }}
      {{- end }}
	  {{- if .Values.affinity }}
      affinity: {{- include "common.tplvalues.render" (dict "value" .Values.affinity "context" $) | nindent 8 }}
      {{- else }}
        ()
        tolerations:
        - key: "dedicated"
          operator: "Equal"
          value: "Kafka-Nifi"
          effect: "NoSchedule"
        affinity:
		()
          nodeAffinity:
            requiredDuringSchedulingIgnoredDuringExecution:
              nodeSelectorTerms:
              - matchExpressions:
                - key: dedicated
                  operator: In
                  values:
                  - Kafka-Nifi


docker login et01-harbor.safaricomet.net --username Mohd.Almas@safaricomet.net --password 'wFB&9N2pku!G'
docker logout

docker pull mohdalmasansari/hadoop-redhat:hadoop-3.1.1-hbase-2.0.2-phoenix-5.0.0
docker pull mohdalmasansari/hive-spark:hive-3.1.0-spark-2.3.0-scala-2.11.6
docker pull docker.io/bitnami/postgresql:11.10.0-debian-10-r83
docker pull quay.io/strimzi/kafka:0.27.1-kafka-3.0.0
docker pull kapkiai/nifi@sha256:7be438fcb8a74249d3799c8b7f9020d2ccf484625689f45d802a3249ac305667
docker pull busybox:latest
docker pull mohdalmasansari/spark:spark-3.2.0-scala-2.12.0
docker pull zookeeper:3.5.5
docker pull k8s.gcr.io/ingress-nginx/controller:v1.1.2@sha256:28b11ce69e57843de44e3db6413e98d09de0f6688e33d4bd384002a44f78405c
docker pull k8s.gcr.io/ingress-nginx/kube-webhook-certgen:v1.1.1@sha256:64d8c73dca984af206adf9d6d7e46aa550362b1d7a01f3a0a91b20cc67868660
docker pull quay.io/strimzi/operator:0.27.1
docker pull kapkiai/nifi-toolkit:1.15.1
docker pull mohdalmasansari/jupyterhub:v2.1.0-beta-ubi8.5
docker pull docker.io/provectuslabs/kafka-ui:8d10eb69e8b91cf6b807cdba3f68f038efa931fc 
docker pull quay.io/strimzi/kafka-bridge:0.21.3
docker pull quay.io/strimzi/jmxtrans:0.27.1
docker pull quay.io/strimzi/kaniko-executor:0.27.1
docker pull quay.io/strimzi/maven-builder:0.27.1


docker tag mohdalmasansari/hadoop-redhat:hadoop-3.1.1-hbase-2.0.2-phoenix-5.0.0                 et01-harbor.safaricomet.net/bigdata/hadoop-redhat:hadoop-3.1.1-hbase-2.0.2-phoenix-5.0.0
docker tag mohdalmasansari/hive-spark:hive-3.1.0-spark-2.3.0-scala-2.11.6                       et01-harbor.safaricomet.net/bigdata/hive-spark:hive-3.1.0-spark-2.3.0-scala-2.11.6
docker tag bitnami/postgresql:11.10.0-debian-10-r83                                             et01-harbor.safaricomet.net/bigdata/postgresql:11.10.0-debian-10-r83
docker tag quay.io/strimzi/kafka:0.27.1-kafka-3.0.0                                             et01-harbor.safaricomet.net/bigdata/strimzi/kafka:0.27.1-kafka-3.0.0
docker tag kapkiai/nifi@sha256:7be438fcb8a74249d3799c8b7f9020d2ccf484625689f45d802a3249ac305667 et01-harbor.safaricomet.net/bigdata/nifi:1.15.10
docker tag busybox:latest                                                                       et01-harbor.safaricomet.net/bigdata/busybox:latest
docker tag mohdalmasansari/spark:spark-3.2.0-scala-2.12.0                                       et01-harbor.safaricomet.net/bigdata/spark:spark-3.2.0-scala-2.12.0
docker tag zookeeper:3.5.5                                                                      et01-harbor.safaricomet.net/bigdata/zookeeper:3.5.5
docker tag k8s.gcr.io/ingress-nginx/controller:v1.1.2@sha256:28b11ce69e57843de44e3db6413e98d09de0f6688e33d4bd384002a44f78405c et01-harbor.safaricomet.net/bigdata/nginx-controller:1.1.2
docker tag k8s.gcr.io/ingress-nginx/kube-webhook-certgen:v1.1.1@sha256:64d8c73dca984af206adf9d6d7e46aa550362b1d7a01f3a0a91b20cc67868660 et01-harbor.safaricomet.net/bigdata/nginx-kube-webhook-certgen:v1.1.1
docker tag quay.io/strimzi/operator:0.27.1 et01-harbor.safaricomet.net/bigdata/strimzi-operator:0.27.1
docker tag kapkiai/nifi-toolkit:1.15.1 et01-harbor.safaricomet.net/bigdata/nifi-toolkit:1.15.1
docker tag mohdalmasansari/jupyterhub:v2.1.0-beta-ubi8.5 et01-harbor.safaricomet.net/bigdata/jupyterhub:v2.1.0-beta-ubi8.5
docker tag provectuslabs/kafka-ui:8d10eb69e8b91cf6b807cdba3f68f038efa931fc  et01-harbor.safaricomet.net/bigdata/kafka-ui:8d10eb69e8b91cf6b807cdba3f68f038efa931fc  
docker tag quay.io/strimzi/kafka-bridge:0.21.3    et01-harbor.safaricomet.net/bigdata/strimzi/kafka-bridge:0.21.3 
docker tag quay.io/strimzi/jmxtrans:0.27.1        et01-harbor.safaricomet.net/bigdata/strimzi/jmxtrans:0.27.1
docker tag quay.io/strimzi/kaniko-executor:0.27.1 et01-harbor.safaricomet.net/bigdata/strimzi/kaniko-executor:0.27.1
docker tag quay.io/strimzi/maven-builder:0.27.1   et01-harbor.safaricomet.net/bigdata/strimzi/maven-builder:0.27.1

docker push et01-harbor.safaricomet.net/bigdata/hadoop-redhat:hadoop-3.1.1-hbase-2.0.2-phoenix-5.0.0
docker push et01-harbor.safaricomet.net/bigdata/hive-spark:hive-3.1.0-spark-2.3.0-scala-2.11.6
docker push et01-harbor.safaricomet.net/bigdata/postgresql:11.10.0-debian-10-r83
docker push et01-harbor.safaricomet.net/bigdata/strimzi/kafka:0.27.1-kafka-3.0.0
docker push et01-harbor.safaricomet.net/bigdata/nifi:1.15.10
docker push et01-harbor.safaricomet.net/bigdata/busybox:latest
docker push et01-harbor.safaricomet.net/bigdata/spark:spark-3.2.0-scala-2.12.0
docker push et01-harbor.safaricomet.net/bigdata/zookeeper:3.5.5
docker push et01-harbor.safaricomet.net/bigdata/nginx-controller:1.1.2
docker push et01-harbor.safaricomet.net/bigdata/nginx-kube-webhook-certgen:v1.1.1
docker push et01-harbor.safaricomet.net/bigdata/strimzi-operator:0.27.1
docker push et01-harbor.safaricomet.net/bigdata/nifi-toolkit:1.15.1
docker push et01-harbor.safaricomet.net/bigdata/jupyterhub:v2.1.0-beta-ubi8.5
docker push et01-harbor.safaricomet.net/bigdata/kafka-ui:8d10eb69e8b91cf6b807cdba3f68f038efa931fc
docker push et01-harbor.safaricomet.net/bigdata/strimzi/kafka-bridge:0.21.3 
docker push et01-harbor.safaricomet.net/bigdata/strimzi/jmxtrans:0.27.1
docker push et01-harbor.safaricomet.net/bigdata/strimzi/kaniko-executor:0.27.1
docker push et01-harbor.safaricomet.net/bigdata/strimzi/maven-builder:0.27.1